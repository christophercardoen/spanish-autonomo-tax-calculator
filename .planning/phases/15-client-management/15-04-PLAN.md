---
phase: 15-client-management
plan: 04
type: execute
wave: 2
depends_on: ["15-01", "15-02"]
files_modified: [autonomo_dashboard.html]
autonomous: true

must_haves:
  truths:
    - "Client list shows name, country flag, active projects count, last invoice date"
    - "User can search clients by name, NIF, or country"
    - "User can filter clients by country and has-active-project"
    - "User can create new client via modal form"
    - "Create client modal validates tax ID on blur"
    - "EU clients can trigger VIES verification via button"
    - "Spanish clients use SpanishTaxIdValidator automatically"
  artifacts:
    - path: "autonomo_dashboard.html"
      provides: "ClientListUI module, ClientFormUI module, client list tab in dashboard"
      contains: "ClientListUI"
  key_links:
    - from: "ClientListUI.render"
      to: "ClientManager.getClients"
      via: "Load clients for display"
      pattern: "ClientManager\\.getClients"
    - from: "ClientFormUI.validateTaxId"
      to: "SpanishTaxIdValidator or VIESValidator"
      via: "On blur validation"
      pattern: "(SpanishTaxIdValidator|VIESValidator)"
    - from: "ClientFormUI.save"
      to: "ClientManager.createClient"
      via: "Form submission"
      pattern: "ClientManager\\.createClient"
---

<objective>
Create client list UI with search/filter, and create/edit client modal with tax ID validation.

Purpose: Enables CLIENT-10 (list view), CLIENT-11 (search), CLIENT-01 (create client form), CLIENT-02 (Spanish validation UX), CLIENT-03 (VIES validation UX), CLIENT-05 (B2B/B2C toggle). Core user interface for client management.
Output: ClientListUI module, ClientFormUI module, clients tab in dashboard navigation
</objective>

<execution_context>
@/Users/christophercardoen/.claude/get-shit-done/workflows/execute-plan.md
@/Users/christophercardoen/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/15-client-management/15-CONTEXT.md
@.planning/phases/15-client-management/15-02-SUMMARY.md
@.planning/phases/14-authentication-permissions/14-03-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Client List UI Module</name>
  <files>autonomo_dashboard.html</files>
  <action>
Add ClientListUI module and "Clientes" tab to dashboard navigation.

**1. Add Clients tab to navigation:**
Find the dashboard tab navigation (likely in the HTML section with entity switcher). Add a new tab:

```html
<button class="tab-btn" data-tab="clients">Clientes</button>
```

**2. Add clients tab panel:**
Add a new tab panel section:

```html
<div id="clients-tab" class="tab-panel hidden">
  <div class="clients-header">
    <h2>Clientes</h2>
    <div class="clients-actions">
      <button id="add-client-btn" class="btn btn-primary" data-permission="create">
        + Nuevo Cliente
      </button>
    </div>
  </div>

  <div class="clients-filters">
    <input type="text" id="client-search" placeholder="Buscar por nombre, NIF..." class="search-input">
    <select id="client-country-filter" class="filter-select">
      <option value="">Todos los paÃ­ses</option>
      <option value="ES">ðŸ‡ªðŸ‡¸ EspaÃ±a</option>
      <option value="BE">ðŸ‡§ðŸ‡ª BÃ©lgica</option>
      <option value="NL">ðŸ‡³ðŸ‡± PaÃ­ses Bajos</option>
      <option value="DE">ðŸ‡©ðŸ‡ª Alemania</option>
      <option value="FR">ðŸ‡«ðŸ‡· Francia</option>
      <option value="GB">ðŸ‡¬ðŸ‡§ Reino Unido</option>
      <option value="US">ðŸ‡ºðŸ‡¸ Estados Unidos</option>
    </select>
    <label class="filter-checkbox">
      <input type="checkbox" id="client-active-filter">
      Solo con proyectos activos
    </label>
  </div>

  <div id="client-list" class="client-list">
    <!-- Populated by ClientListUI -->
  </div>

  <div id="client-empty-state" class="empty-state hidden">
    <p>No hay clientes. Crea tu primer cliente para comenzar.</p>
  </div>
</div>
```

**3. Add CSS for client list:**

```css
/* Client List Styles */
.clients-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1rem;
}

.clients-filters {
  display: flex;
  gap: 1rem;
  margin-bottom: 1rem;
  flex-wrap: wrap;
}

.clients-filters .search-input {
  flex: 1;
  min-width: 200px;
  padding: 0.5rem 1rem;
  background: var(--card-bg);
  border: 1px solid var(--border-color);
  border-radius: 4px;
  color: var(--text-primary);
}

.clients-filters .filter-select {
  padding: 0.5rem;
  background: var(--card-bg);
  border: 1px solid var(--border-color);
  border-radius: 4px;
  color: var(--text-primary);
}

.clients-filters .filter-checkbox {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  cursor: pointer;
}

.client-list {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.client-row {
  display: grid;
  grid-template-columns: auto 1fr auto auto auto;
  gap: 1rem;
  align-items: center;
  padding: 1rem;
  background: var(--card-bg);
  border: 1px solid var(--border-color);
  border-radius: 4px;
  cursor: pointer;
  transition: border-color 0.2s;
}

.client-row:hover {
  border-color: var(--accent-primary);
}

.client-flag {
  font-size: 1.5rem;
}

.client-name {
  font-weight: 500;
  color: var(--text-primary);
}

.client-projects {
  color: var(--text-secondary);
  font-size: 0.875rem;
}

.client-invoiced {
  font-family: var(--font-mono);
  color: var(--text-primary);
}

.client-last-invoice {
  color: var(--text-secondary);
  font-size: 0.875rem;
}

.empty-state {
  text-align: center;
  padding: 3rem;
  color: var(--text-secondary);
}
```

**4. ClientListUI module:**

```javascript
// === Client List UI Module ===
const ClientListUI = {
  container: null,
  emptyState: null,
  searchInput: null,
  countryFilter: null,
  activeFilter: null,

  init() {
    this.container = document.getElementById('client-list');
    this.emptyState = document.getElementById('client-empty-state');
    this.searchInput = document.getElementById('client-search');
    this.countryFilter = document.getElementById('client-country-filter');
    this.activeFilter = document.getElementById('client-active-filter');

    if (!this.container) return;

    // Bind filter events
    this.searchInput?.addEventListener('input', debounce(() => this.refresh(), 300));
    this.countryFilter?.addEventListener('change', () => this.refresh());
    this.activeFilter?.addEventListener('change', () => this.refresh());

    // Add client button
    document.getElementById('add-client-btn')?.addEventListener('click', () => {
      ClientFormUI.openCreate();
    });

    // Subscribe to entity changes
    EntityContext.subscribe(() => this.refresh());
  },

  async refresh() {
    if (!this.container) return;

    const filters = {
      search: this.searchInput?.value || '',
      country_code: this.countryFilter?.value || null
    };

    const clients = await ClientManager.getClients(filters);

    // Enrich with project counts (async)
    const enriched = await Promise.all(clients.map(async (client) => {
      const activeCount = await ProjectManager.countActiveProjects(client.id);
      return {
        ...client,
        _activeProjectCount: activeCount,
        _totalInvoicedCents: 0, // Will be calculated when invoices exist
        _lastInvoiceDate: null  // Will be calculated when invoices exist
      };
    }));

    // Apply active project filter after enrichment
    let filtered = enriched;
    if (this.activeFilter?.checked) {
      filtered = enriched.filter(c => c._activeProjectCount > 0);
    }

    this.render(filtered);
  },

  render(clients) {
    if (clients.length === 0) {
      this.container.innerHTML = '';
      this.emptyState?.classList.remove('hidden');
      return;
    }

    this.emptyState?.classList.add('hidden');

    this.container.innerHTML = clients.map(client => `
      <div class="client-row" data-client-id="${client.id}">
        <span class="client-flag">${getFlagEmoji(client.country_code)}</span>
        <span class="client-name">${escapeHtml(client.name)}</span>
        <span class="client-projects">${client._activeProjectCount} proyecto${client._activeProjectCount !== 1 ? 's' : ''}</span>
        <span class="client-invoiced">${MoneyUtils.formatEuros(client._totalInvoicedCents || 0)}</span>
        <span class="client-last-invoice">${client._lastInvoiceDate || 'â€”'}</span>
      </div>
    `).join('');

    // Bind click events
    this.container.querySelectorAll('.client-row').forEach(row => {
      row.addEventListener('click', () => {
        const clientId = parseInt(row.dataset.clientId, 10);
        ClientDetailUI.open(clientId);
      });
    });
  }
};

// Debounce helper (if not already defined)
function debounce(fn, delay) {
  let timeout;
  return function(...args) {
    clearTimeout(timeout);
    timeout = setTimeout(() => fn.apply(this, args), delay);
  };
}
```

**5. Initialize in DOMContentLoaded:**
Add `ClientListUI.init();` to the initialization sequence after database init.

**Placement:** Add CSS in style section, HTML in dashboard panels, JS after ProjectManager module.
  </action>
  <verify>
1. Open dashboard in browser
2. Click "Clientes" tab - should show empty state
3. Search input, country dropdown, and active filter visible
4. "+ Nuevo Cliente" button visible (if user has create permission)
5. No console errors
  </verify>
  <done>
Client list UI displays clients with flag, name, active projects count, invoiced total, and last invoice date. Search and filters work. Clicking row navigates to client detail.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create Client Form Modal UI</name>
  <files>autonomo_dashboard.html</files>
  <action>
Add ClientFormUI module for create/edit client modal with tax ID validation.

**1. Add modal HTML (near other modals):**

```html
<!-- Client Form Modal -->
<div id="client-modal" class="modal hidden">
  <div class="modal-content modal-lg">
    <div class="modal-header">
      <h3 id="client-modal-title">Nuevo Cliente</h3>
      <button class="modal-close" onclick="ClientFormUI.close()">&times;</button>
    </div>

    <form id="client-form" class="modal-form">
      <div class="form-row">
        <div class="form-group">
          <label for="client-name">Nombre / RazÃ³n Social *</label>
          <input type="text" id="client-name" required>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="client-country">PaÃ­s *</label>
          <select id="client-country" required>
            <option value="ES">ðŸ‡ªðŸ‡¸ EspaÃ±a</option>
            <option value="BE">ðŸ‡§ðŸ‡ª BÃ©lgica</option>
            <option value="NL">ðŸ‡³ðŸ‡± PaÃ­ses Bajos</option>
            <option value="DE">ðŸ‡©ðŸ‡ª Alemania</option>
            <option value="FR">ðŸ‡«ðŸ‡· Francia</option>
            <option value="IT">ðŸ‡®ðŸ‡¹ Italia</option>
            <option value="PT">ðŸ‡µðŸ‡¹ Portugal</option>
            <option value="GB">ðŸ‡¬ðŸ‡§ Reino Unido</option>
            <option value="US">ðŸ‡ºðŸ‡¸ Estados Unidos</option>
            <option value="CA">ðŸ‡¨ðŸ‡¦ CanadÃ¡</option>
            <option value="AU">ðŸ‡¦ðŸ‡º Australia</option>
          </select>
        </div>

        <div class="form-group">
          <label for="client-tax-id">NIF / CIF / VAT</label>
          <div class="tax-id-input-group">
            <input type="text" id="client-tax-id" placeholder="Ej: B12345678">
            <button type="button" id="vies-verify-btn" class="btn btn-secondary hidden">
              Verificar VIES
            </button>
          </div>
          <span id="tax-id-validation" class="validation-message"></span>
        </div>
      </div>

      <div id="eu-b2b-section" class="form-row hidden">
        <div class="form-group">
          <label class="checkbox-label">
            <input type="checkbox" id="client-is-b2b" checked>
            Cliente B2B (inversiÃ³n del sujeto pasivo)
          </label>
          <small class="form-help">Desmarcar si es consumidor final (B2C)</small>
        </div>
      </div>

      <div id="w8ben-section" class="form-row hidden">
        <div class="form-group">
          <label class="checkbox-label">
            <input type="checkbox" id="client-w8ben">
            W-8BEN en archivo (retenciÃ³n 0%)
          </label>
          <small class="form-help">Para clientes estadounidenses con convenio de doble imposiciÃ³n</small>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="client-email">Email</label>
          <input type="email" id="client-email" placeholder="facturacion@empresa.com">
        </div>

        <div class="form-group">
          <label for="client-phone">TelÃ©fono</label>
          <input type="tel" id="client-phone" placeholder="+34 600 000 000">
        </div>
      </div>

      <div class="form-row">
        <div class="form-group full-width">
          <label for="client-address">DirecciÃ³n</label>
          <textarea id="client-address" rows="2" placeholder="Calle, nÃºmero, cÃ³digo postal, ciudad"></textarea>
        </div>
      </div>

      <div class="modal-actions">
        <button type="button" class="btn btn-secondary" onclick="ClientFormUI.close()">Cancelar</button>
        <button type="submit" class="btn btn-primary" id="client-submit-btn">Guardar</button>
      </div>
    </form>
  </div>
</div>
```

**2. Add CSS for form:**

```css
/* Client Form Modal Styles */
.modal-lg {
  max-width: 600px;
}

.modal-form {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.form-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1rem;
}

.form-row .full-width {
  grid-column: 1 / -1;
}

.form-group label {
  display: block;
  margin-bottom: 0.5rem;
  font-weight: 500;
  color: var(--text-primary);
}

.form-group input,
.form-group select,
.form-group textarea {
  width: 100%;
  padding: 0.5rem;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-color);
  border-radius: 4px;
  color: var(--text-primary);
}

.form-group input:focus,
.form-group select:focus,
.form-group textarea:focus {
  outline: none;
  border-color: var(--accent-primary);
}

.form-help {
  display: block;
  font-size: 0.75rem;
  color: var(--text-secondary);
  margin-top: 0.25rem;
}

.tax-id-input-group {
  display: flex;
  gap: 0.5rem;
}

.tax-id-input-group input {
  flex: 1;
}

.validation-message {
  display: block;
  font-size: 0.75rem;
  margin-top: 0.25rem;
}

.validation-message.valid {
  color: var(--success-color);
}

.validation-message.invalid {
  color: var(--error-color);
}

.validation-message.warning {
  color: var(--warning-color);
}

.checkbox-label {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  cursor: pointer;
}

.modal-actions {
  display: flex;
  justify-content: flex-end;
  gap: 0.5rem;
  margin-top: 1rem;
  padding-top: 1rem;
  border-top: 1px solid var(--border-color);
}
```

**3. ClientFormUI module:**

```javascript
// === Client Form UI Module ===
const ClientFormUI = {
  modal: null,
  form: null,
  editingId: null,
  viesValidated: false,

  init() {
    this.modal = document.getElementById('client-modal');
    this.form = document.getElementById('client-form');

    if (!this.form) return;

    // Bind form events
    this.form.addEventListener('submit', (e) => this.handleSubmit(e));

    // Country change handler
    document.getElementById('client-country')?.addEventListener('change', () => {
      this.updateCountryDependentFields();
      this.clearValidation();
    });

    // Tax ID blur validation
    document.getElementById('client-tax-id')?.addEventListener('blur', () => {
      this.validateTaxId();
    });

    // VIES verify button
    document.getElementById('vies-verify-btn')?.addEventListener('click', () => {
      this.verifyVIES();
    });
  },

  openCreate() {
    this.editingId = null;
    this.viesValidated = false;
    this.form.reset();
    document.getElementById('client-modal-title').textContent = 'Nuevo Cliente';
    document.getElementById('client-submit-btn').textContent = 'Crear Cliente';
    this.updateCountryDependentFields();
    this.clearValidation();
    this.modal?.classList.remove('hidden');
    document.getElementById('client-name')?.focus();
  },

  async openEdit(clientId) {
    const client = await ClientManager.getClient(clientId);
    if (!client) return;

    this.editingId = clientId;
    this.viesValidated = client.tax_id_validated;

    document.getElementById('client-modal-title').textContent = 'Editar Cliente';
    document.getElementById('client-submit-btn').textContent = 'Guardar Cambios';

    // Populate form
    document.getElementById('client-name').value = client.name || '';
    document.getElementById('client-country').value = client.country_code || 'ES';
    document.getElementById('client-tax-id').value = client.tax_id || '';
    document.getElementById('client-email').value = client.email || '';
    document.getElementById('client-phone').value = client.phone || '';
    document.getElementById('client-address').value = client.address || '';
    document.getElementById('client-is-b2b').checked = client.is_b2b !== false;
    document.getElementById('client-w8ben').checked = client.w8ben_uploaded;

    this.updateCountryDependentFields();

    if (client.tax_id_validated) {
      this.showValidation('NIF-IVA verificado con VIES', 'valid');
    }

    this.modal?.classList.remove('hidden');
  },

  close() {
    this.modal?.classList.add('hidden');
    this.editingId = null;
    this.viesValidated = false;
  },

  updateCountryDependentFields() {
    const country = document.getElementById('client-country')?.value;
    const euB2BSection = document.getElementById('eu-b2b-section');
    const w8benSection = document.getElementById('w8ben-section');
    const viesBtn = document.getElementById('vies-verify-btn');

    // Show B2B toggle for EU countries (not Spain)
    const isEU = VIESValidator.isVIESCountry(country) && country !== 'ES';
    euB2BSection?.classList.toggle('hidden', !isEU);

    // Show W-8BEN for US
    w8benSection?.classList.toggle('hidden', country !== 'US');

    // Show VIES button for EU countries (not Spain)
    viesBtn?.classList.toggle('hidden', !isEU);
  },

  validateTaxId() {
    const country = document.getElementById('client-country')?.value;
    const taxId = document.getElementById('client-tax-id')?.value?.trim();

    if (!taxId) {
      this.clearValidation();
      return { valid: true, empty: true };
    }

    if (country === 'ES') {
      // Spanish validation
      const result = SpanishTaxIdValidator.validate(taxId);
      if (result.valid) {
        this.showValidation(`${result.type} vÃ¡lido`, 'valid');
      } else {
        this.showValidation(result.error, 'invalid');
      }
      return result;
    } else if (VIESValidator.isVIESCountry(country)) {
      // EU format validation
      const result = VIESValidator.validateFormat(country, taxId);
      if (result.valid) {
        this.showValidation('Formato vÃ¡lido. Verificar con VIES para confirmar.', 'warning');
        this.viesValidated = false;
      } else {
        this.showValidation(result.error, 'invalid');
      }
      return result;
    }

    // Third country - no validation
    this.clearValidation();
    return { valid: true };
  },

  async verifyVIES() {
    const country = document.getElementById('client-country')?.value;
    const taxId = document.getElementById('client-tax-id')?.value?.trim();

    if (!taxId || !VIESValidator.isVIESCountry(country)) return;

    const viesBtn = document.getElementById('vies-verify-btn');
    viesBtn.disabled = true;
    viesBtn.textContent = 'Verificando...';

    try {
      const result = await VIESValidator.validateWithVIES(country, taxId);

      if (result.valid === true) {
        this.showValidation(`VIES vÃ¡lido: ${result.name || 'Verificado'}`, 'valid');
        this.viesValidated = true;
      } else if (result.valid === false) {
        this.showValidation(result.error || 'NIF-IVA no vÃ¡lido en VIES', 'invalid');
        this.viesValidated = false;
      } else if (result.warning) {
        this.showValidation(result.warning, 'warning');
        this.viesValidated = false;
      }
    } catch (err) {
      this.showValidation('Error al conectar con VIES', 'warning');
    } finally {
      viesBtn.disabled = false;
      viesBtn.textContent = 'Verificar VIES';
    }
  },

  showValidation(message, type) {
    const el = document.getElementById('tax-id-validation');
    if (el) {
      el.textContent = message;
      el.className = `validation-message ${type}`;
    }
  },

  clearValidation() {
    const el = document.getElementById('tax-id-validation');
    if (el) {
      el.textContent = '';
      el.className = 'validation-message';
    }
  },

  async handleSubmit(e) {
    e.preventDefault();

    const country = document.getElementById('client-country')?.value;
    const taxId = document.getElementById('client-tax-id')?.value?.trim();
    const isB2B = document.getElementById('client-is-b2b')?.checked;

    // For EU B2B clients, require VIES validation
    const isEUB2B = VIESValidator.isVIESCountry(country) && country !== 'ES' && isB2B;
    if (isEUB2B && taxId && !this.viesValidated) {
      // Check if format at least valid
      const formatResult = VIESValidator.validateFormat(country, taxId);
      if (!formatResult.valid) {
        alert(formatResult.error);
        return;
      }

      // Warn about VIES
      const proceed = confirm(
        'El NIF-IVA no ha sido verificado con VIES. ' +
        'Para aplicar inversiÃ³n del sujeto pasivo, se requiere verificaciÃ³n VIES. ' +
        'Â¿Desea continuar sin verificaciÃ³n?'
      );
      if (!proceed) return;
    }

    const clientData = {
      name: document.getElementById('client-name')?.value?.trim(),
      country_code: country,
      tax_id: taxId || null,
      email: document.getElementById('client-email')?.value?.trim() || null,
      phone: document.getElementById('client-phone')?.value?.trim() || null,
      address: document.getElementById('client-address')?.value?.trim() || null,
      is_b2b: isB2B,
      w8ben_uploaded: document.getElementById('client-w8ben')?.checked || false
    };

    try {
      if (this.editingId) {
        await ClientManager.updateClient(this.editingId, clientData);

        // Update VIES validation status
        if (this.viesValidated && VIESValidator.isVIESCountry(country)) {
          await ClientManager.setVIESValidation(this.editingId, {
            valid: true,
            validatedAt: new Date().toISOString()
          });
        }
      } else {
        const id = await ClientManager.createClient(clientData);

        // If VIES validated during creation, update status
        if (this.viesValidated) {
          await ClientManager.setVIESValidation(id, {
            valid: true,
            validatedAt: new Date().toISOString()
          });
        }
      }

      this.close();
      await ClientListUI.refresh();
    } catch (err) {
      alert(err.message);
    }
  }
};
```

**4. Initialize in DOMContentLoaded:**
Add `ClientFormUI.init();` after ClientListUI.init().

**Placement:** Add HTML in modals section, CSS in styles, JS after ClientListUI module.
  </action>
  <verify>
1. Click "+ Nuevo Cliente" - modal opens
2. Change country dropdown - B2B toggle shows for EU countries, W-8BEN for US
3. Enter Spanish NIF (e.g., "12345678Z") - validates on blur
4. Enter Belgian VAT - shows "Verificar VIES" button
5. Click VIES button - attempts verification (may show offline warning)
6. Fill required fields and submit - client created
7. Client appears in list
  </verify>
  <done>
Client form modal with country-aware tax ID validation. Spanish uses SpanishTaxIdValidator, EU shows VIES button, US shows W-8BEN checkbox. Form creates/updates clients with proper validation.
  </done>
</task>

</tasks>

<verification>
After both tasks complete:

1. **Client List:**
   - Tab accessible from navigation
   - Search filters clients by name/NIF
   - Country filter works
   - Active projects filter works
   - Click row navigates to detail (will show error until Plan 05)

2. **Client Form:**
   - Country change updates visible fields
   - Spanish NIF validates on blur
   - EU VAT shows VIES button
   - US shows W-8BEN checkbox
   - Form submission creates client
   - Validation errors display properly

3. **Integration:**
   - PermissionUI respects data-permission attributes
   - EntityContext subscription refreshes list on entity change
</verification>

<success_criteria>
- Clientes tab visible in navigation
- Client list displays flag, name, projects count, invoiced, last invoice
- Search input filters clients as you type
- Country dropdown filters by selected country
- "Solo con proyectos activos" checkbox filters
- "+ Nuevo Cliente" button opens modal
- Country change shows/hides B2B toggle, W-8BEN, VIES button
- Spanish NIF validates on blur with SpanishTaxIdValidator
- EU VAT format validates, shows VIES verify button
- VIES button attempts verification (graceful offline handling)
- Form submission creates client and refreshes list
- Client row click triggers ClientDetailUI.open (handler ready for Plan 05)
</success_criteria>

<output>
After completion, create `.planning/phases/15-client-management/15-04-SUMMARY.md`
</output>
