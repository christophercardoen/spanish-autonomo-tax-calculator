---
phase: 05-dashboard-ui
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - autonomo_dashboard.html
autonomous: true

must_haves:
  truths:
    - "Dashboard uses DM Sans for UI text and JetBrains Mono for numbers"
    - "Background color is charcoal (#1a1a1a) not purple-tinted"
    - "User can switch between Scenarios, Calendar, Expenses, Details tabs"
    - "Only one tab panel is visible at a time"
    - "Switching tabs is instant with no flicker"
  artifacts:
    - path: "autonomo_dashboard.html"
      provides: "Tabbed layout with professional typography"
      contains: "fonts.googleapis.com/css2?family=DM+Sans"
  key_links:
    - from: ".tab-input:checked"
      to: ".tab-content"
      via: "CSS sibling selector"
      pattern: "tab-.*:checked.*~.*tab-panels"
---

<objective>
Add professional typography (DM Sans + JetBrains Mono) and implement tabbed layout to organize dashboard sections.

Purpose: Establishes Bloomberg-inspired visual foundation and clean section organization per UI-01, UI-11, UI-12 and CONTEXT.md decisions.
Output: Dashboard with Google Fonts import, updated CSS variables, and working tab navigation.
</objective>

<execution_context>
@/Users/christophercardoen/.claude/get-shit-done/workflows/execute-plan.md
@/Users/christophercardoen/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-dashboard-ui/05-CONTEXT.md
@.planning/phases/05-dashboard-ui/05-RESEARCH.md
@autonomo_dashboard.html
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add Google Fonts and Update CSS Variables</name>
  <files>autonomo_dashboard.html</files>
  <action>
Add Google Fonts import in the head section (before the style block):

```html
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
```

Update the :root CSS variables to extend the theme:

```css
:root {
  /* Updated theme colors per CONTEXT.md */
  --bg: #1a1a1a;           /* Charcoal (was #1a1a2e) */
  --bg-surface: #242424;   /* Slightly lighter for cards */
  --bg-elevated: #2d2d44;  /* For modals, tooltips */
  --text: #eaeaea;
  --text-muted: #a0a0a0;
  --accent: #4ade80;

  /* Semantic colors per UI-07 */
  --positive: #4ade80;     /* green - income/positive values */
  --negative: #f87171;     /* red - expenses/negative values */
  --warning: #fb923c;      /* orange - threshold warnings */
  --belgium: #60a5fa;      /* blue - Belgium related */

  /* Typography per CONTEXT.md and UI-11 */
  --font-ui: 'DM Sans', system-ui, sans-serif;
  --font-mono: 'JetBrains Mono', monospace;
  --size-header: 20px;
  --size-numbers: 18px;
  --size-labels: 14px;
  --size-small: 12px;
}
```

Update body to use the new font variable:

```css
body {
  font-family: var(--font-ui);
  /* rest unchanged */
}
```

Note: Keep existing JetBrains Mono references in place (they already use 'JetBrains Mono', monospace) - they will now load the proper font instead of falling back to system monospace.
  </action>
  <verify>
Open autonomo_dashboard.html in browser. DM Sans should be visible for UI text (smooth, geometric sans-serif). JetBrains Mono should render for numbers (distinctive lowercase 'a' and 'l'). Background should be pure charcoal (#1a1a1a), not purple-tinted.
  </verify>
  <done>
Google Fonts loads DM Sans and JetBrains Mono. CSS variables include --font-ui, --font-mono, semantic colors, and updated --bg to #1a1a1a.
  </done>
</task>

<task type="auto">
  <name>Task 2: Implement CSS Radio Button Tab System</name>
  <files>autonomo_dashboard.html</files>
  <action>
Add tab system CSS after the existing :root variables:

```css
/* ===========================================
   PHASE 5: TAB NAVIGATION
   =========================================== */

/* Hide radio buttons but keep accessible */
.tab-input {
  position: absolute;
  opacity: 0;
  pointer-events: none;
}

/* Tab navigation bar */
.tab-nav {
  display: flex;
  gap: 0;
  border-bottom: 1px solid rgba(255,255,255,0.1);
  margin-bottom: 1.5rem;
}

/* Tab labels as clickable buttons */
.tab-label {
  display: inline-block;
  padding: 0.75rem 1.5rem;
  cursor: pointer;
  border-bottom: 2px solid transparent;
  color: var(--text-muted);
  font-weight: 500;
  font-size: var(--size-labels);
  transition: border-color 0.2s, color 0.2s;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.tab-label:hover {
  color: var(--text);
}

/* Active tab styling */
#tab-scenarios:checked ~ .tab-nav .tab-label[for="tab-scenarios"],
#tab-calendar:checked ~ .tab-nav .tab-label[for="tab-calendar"],
#tab-expenses:checked ~ .tab-nav .tab-label[for="tab-expenses"],
#tab-details:checked ~ .tab-nav .tab-label[for="tab-details"] {
  border-bottom-color: var(--accent);
  color: var(--accent);
}

/* Hide all tab content by default */
.tab-panel {
  display: none;
}

/* Show content for checked tab */
#tab-scenarios:checked ~ .tab-panels .panel-scenarios,
#tab-calendar:checked ~ .tab-panels .panel-calendar,
#tab-expenses:checked ~ .tab-panels .panel-expenses,
#tab-details:checked ~ .tab-panels .panel-details {
  display: block;
}
```

Restructure the HTML body content. Find the main sections (scenario-section, calendar-section, expenses-container, and the input/results sections). Wrap them in the tab structure:

```html
<div class="dashboard">
  <!-- Tab radio inputs (hidden) -->
  <input type="radio" name="tabs" id="tab-scenarios" class="tab-input" checked>
  <input type="radio" name="tabs" id="tab-calendar" class="tab-input">
  <input type="radio" name="tabs" id="tab-expenses" class="tab-input">
  <input type="radio" name="tabs" id="tab-details" class="tab-input">

  <!-- Tab navigation -->
  <nav class="tab-nav">
    <label for="tab-scenarios" class="tab-label">Scenarios</label>
    <label for="tab-calendar" class="tab-label">Calendar</label>
    <label for="tab-expenses" class="tab-label">Expenses</label>
    <label for="tab-details" class="tab-label">Details</label>
  </nav>

  <!-- Tab panels container -->
  <div class="tab-panels">
    <section class="tab-panel panel-scenarios">
      <!-- Move: .scenario-section content here -->
      <!-- Move: .comparison-container here -->
    </section>

    <section class="tab-panel panel-calendar">
      <!-- Move: .calendar-section content here -->
    </section>

    <section class="tab-panel panel-expenses">
      <!-- Move: .expenses-container content here -->
    </section>

    <section class="tab-panel panel-details">
      <!-- Move: input-section and fiscal results here -->
    </section>
  </div>
</div>
```

Important: The dialog elements (edit modal, template dialog, day picker dialog) should remain OUTSIDE the dashboard div - dialogs are portal-like and should not be nested inside tabs.

Keep existing class names on moved content so existing JavaScript continues to work.
  </action>
  <verify>
Open dashboard in browser. Four tabs should be visible (Scenarios, Calendar, Expenses, Details). Clicking each tab shows only that section's content. The active tab should have green underline. Scenarios tab should be active by default.
  </verify>
  <done>
Tab navigation works via CSS radio buttons. All four sections accessible via tabs. Existing functionality preserved (scenario cards, calendar, expenses, calculations all still work).
  </done>
</task>

<task type="auto">
  <name>Task 3: Add Title and Dashboard Header</name>
  <files>autonomo_dashboard.html</files>
  <action>
Add a dashboard header above the tab navigation:

```css
/* Dashboard header */
.dashboard-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1.5rem;
  padding-bottom: 1rem;
  border-bottom: 1px solid rgba(255,255,255,0.1);
}

.dashboard-title {
  margin: 0;
  font-size: 1.5rem;
  font-weight: 600;
  color: var(--text);
}

.dashboard-subtitle {
  margin: 0.25rem 0 0 0;
  font-size: var(--size-small);
  color: var(--text-muted);
}
```

Add header HTML before the tab inputs:

```html
<header class="dashboard-header">
  <div>
    <h1 class="dashboard-title">Autonomo Tax Calculator</h1>
    <p class="dashboard-subtitle">Spain - Belgium Cross-Border 2025/2026</p>
  </div>
</header>
```

Update the container max-width for dashboard layout:

```css
.container {
  max-width: 1200px;  /* Wider for dashboard */
  margin: 0 auto;
}

.dashboard {
  position: relative;  /* For absolute positioned radio inputs */
}
```
  </action>
  <verify>
Dashboard shows professional header with title "Autonomo Tax Calculator" and subtitle. Layout is wider (1200px) to accommodate the dashboard view.
  </verify>
  <done>
Dashboard has professional header. Container width updated for dashboard layout. Typography uses DM Sans per UI-11.
  </done>
</task>

</tasks>

<verification>
1. Open autonomo_dashboard.html in browser
2. Verify DM Sans renders for all UI text (check Developer Tools > Computed > font-family)
3. Verify JetBrains Mono renders for all number values
4. Verify background is charcoal (#1a1a1a), not purple
5. Click each tab - only one panel visible at a time
6. Verify existing functionality still works:
   - Scenario cards display and are clickable
   - Calendar navigation works
   - Expense sections display
   - IRPF calculations still function
</verification>

<success_criteria>
- [ ] Google Fonts CDN link present in head
- [ ] :root contains --font-ui, --font-mono, --positive, --negative, --warning
- [ ] --bg is #1a1a1a
- [ ] Tab navigation shows 4 tabs (Scenarios, Calendar, Expenses, Details)
- [ ] CSS uses radio button pattern for tab switching (no JS required)
- [ ] Active tab has green accent underline
- [ ] All existing functionality preserved
</success_criteria>

<output>
After completion, create `.planning/phases/05-dashboard-ui/05-01-SUMMARY.md`
</output>
